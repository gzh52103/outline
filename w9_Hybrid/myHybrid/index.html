<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>DCloud H5+接口实现混合开发App</title>
    <!-- <script type="text/javascript">
    	
   		document.addEventListener('plusready', function(){
   			//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。")
   			
   		});
   		
    </script> -->
    <link rel="stylesheet" href="./css/bootstrap.css">
    <style>
        .preview img{
            width:120px;margin:5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="py-4">DCloud H5+接口实现混合开发App</h1>
        <div class="list-group pages">
            <a href="views/camera.html" class="list-group-item list-group-item-action active btnCamera">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">摄像头camera</h5>
                <small>&gt;&gt;</small>
              </div>
              <p class="mb-1">拍照、录像、扫码</p>
              <!-- <small>And some small print.</small> -->
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">List group item heading</h5>
                <small class="text-muted">3 days ago</small>
              </div>
              <p class="mb-1">Some placeholder content in a paragraph.</p>
              <small class="text-muted">And some muted small print.</small>
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">List group item heading</h5>
                <small class="text-muted">3 days ago</small>
              </div>
              <p class="mb-1">Some placeholder content in a paragraph.</p>
              <small class="text-muted">And some muted small print.</small>
            </a>
          </div>
          <div class="preview p-3">

          </div>
    </div>
    <script>
        // document.addEventListener('DOMContentLoaded',()=>{
            const pages = document.querySelector('.pages');
            const preview = document.querySelector('.preview');


            const imgs = [];
			
			Array.prototype.forEach.call(pages.children,function(item,idx){
				item.onclick = function(e){
					e.preventDefault();
					
					// webview跳转
					// 1. 创建webview
					const wv = plus.webview.create( item.href, 'page'+idx);
					// 2. 显示webview
					plus.webview.show( wv, 'slide-in-left')
					
				}
			})
    
    //         btnCamera.onclick = function(){
    //             const cmr = plus.camera.getCamera(1);
				// console.log('cmr',cmr);
				
				// cmr.captureImage((capturedFile)=>{
    //                 const imgPath = plus.io.convertLocalFileSystemURL(capturedFile)
				// 	console.log('capturedFile',capturedFile,imgPath);
                    
    //                 const img = document.createElement('img');
    //                 img.src = imgPath;
    //                 img.idx = imgs.length;
    //                 preview.appendChild(img);

    //                 // 保存图片地址
    //                 imgs.push(capturedFile)
					
				// 	// 保存到相册
				// 	plus.gallery.save( capturedFile, ()=>{
				// 		plus.nativeUI.toast('成功保存到相册');
				// 	})
				// })
    //         }

    //         // 点击显示大图
    //         preview.onclick = function(e){
    //             if(e.target.tagName === 'IMG'){
    //                 plus.nativeUI.previewImage(imgs,{
    //                     current:e.target.idx
    //                 })
    //             }
    //         }
        // })
    </script>
</body>
</html>
